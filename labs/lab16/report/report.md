---
## Front matter
title: "Отчёт по лабораторной работе №16"
subtitle: "Программный RAID"
author: "Амина Аджигалиева"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Освоить работу с RAID-массивами при помощи утилиты mdadm.

# Ход выполнения работы

## Подготовка и проверка дисков

Сначала были получены права администратора с помощью команды `su -`.  
Затем выполнена проверка доступных в системе дисков. На скриншоте отображаются устройства `/dev/sdb`, `/dev/sdd`, `/dev/sdf`, подготовленные для использования в RAID.

![Проверка доступных дисков](Screenshot_1.png){ #fig:001 width=80% }

Для каждого из добавленных дисков был создан новый раздел.  
После этого был определён тип созданных разделов. Все они имели значение **83 — Linux**.

![Создание разделов и просмотр их параметров](Screenshot_2.png){ #fig:002 width=80% }

Был изучен список доступных типов разделов, относящихся к RAID.  
Затем тип каждого созданного раздела был изменён на **fd — Linux raid autodetect**.  

Проверка состояния дисков показала, что все разделы корректно получили новый тип.

![Изменение типа разделов на RAID](Screenshot_3.png){ #fig:003 width=80% }

Просмотр итогового состояния:

![Состояние дисков после изменения типа](Screenshot_4.png){ #fig:004 width=80% }

## Создание RAID-массива уровня 1

После подготовки разделов был создан массив RAID 1 на устройствах `/dev/sdb1` и `/dev/sdd1`.  
Затем было выполнено подробное изучение состояния массива:  
он успешно собран, оба устройства работают синхронно, сбойных элементов нет.

![Создание RAID и проверка состояния](Screenshot_5.png){ #fig:005 width=80% }

Детальная информация подтверждает работоспособность массива.

![Детальный вывод mdadm](Screenshot_6.png){ #fig:006 width=80% }

На RAID-массиве была создана файловая система **ext4**.  
Затем был создан каталог для монтирования и RAID подключён к системе.  

![Создание ФС и монтирование](Screenshot_7.png){ #fig:007 width=80% }

В файл `/etc/fstab` была добавлена строка, обеспечивающая автоматическое монтирование массива при запуске системы.

![Конфигурация fstab](Screenshot_8.png){ #fig:008 width=80% }

Для имитации сбоя один из дисков массива был переведён в состояние «faulty» и удалён.  
После этого в массив был добавлен новый диск `/dev/sdf1`.  
Состояние RAID после восстановления вновь отображает два активных устройства.

![Состояние массива после замены диска](Screenshot_9.png){ #fig:009 width=80% }

Работа завершена удалением RAID-массива, остановкой устройства и очисткой суперблоков всех использованных разделов.

![Удаление массива и очистка суперблоков](Screenshot_10.png){ #fig:010 width=80% }

## Создание RAID-массива с горячим резервом

Сначала был создан массив RAID 1 из двух дисков `/dev/sdb1` и `/dev/sdd1`.  
Процесс инициализации завершился успешно, массив был активирован.

![Создание RAID 1](Screenshot_11.png){ #fig:011 width=80% }

После создания массива к нему был добавлен третий диск `/dev/sdf1`, который был определён как горячий резерв.

Состояние массива показывает два активных устройства и одно — в статусе `spare`.

Была выполнена проверка с использованием команды `mdadm --detail`.  
Вывод подтверждает:

- Активные устройства: **2**  
- Рабочие устройства: **3**  
- Диск `/dev/sdf1` работает как hotspare  
- Состояние массива: **clean**

![Состояние массива RAID 1 с hotspare](Screenshot_12.png){ #fig:012 width=80% }

Для проверки корректной работы hotspare был сымитирован сбой устройства `/dev/sdd1`.  
RAID автоматически активировал резервный диск и начал перестроение массива.

В выводе видно:

- `/dev/sdd1` получил статус **faulty**  
- `/dev/sdf1` автоматически занял место в массиве  
- Активных устройств по-прежнему два  

![Сбой диска в RAID и автозамена hotspare](Screenshot_13.png){ #fig:013 width=80% }

После завершения эксперимента массив был размонтирован, остановлен и очищены суперблоки всех устройств.

![Удаление массива и очистка суперблоков](Screenshot_14.png){ #fig:014 width=80% }

## Преобразование массива RAID 1 в RAID 5

На следующем этапе снова был создан RAID 1 на устройствах `/dev/sdb1` и `/dev/sdd1`.

![Создание RAID1](Screenshot_15.png){ #fig:015 width=80% }

В массив был добавлен третий диск `/dev/sdf1`, который вошёл в состав массива как hotspare.

Проверка показывает:

- 3 устройства в работе  
- 2 активных  
- 1 spare  

![Добавление третьего диска](Screenshot_16.png){ #fig:016 width=80% }

Тип массива был изменён, и RAID начал перестройку в RAID 5.

После изменения уровня отображается новая конфигурация:

- RAID Level: **raid5**  
- Активные устройства: **2**  
- Рабочие устройства: **3**  
- Spare: **1**

![Изменение уровня массива на RAID 5](Screenshot_17.png){ #fig:017 width=80% }

После расширения массива до трёх устройств все три диска стали активными.

Новая конфигурация:

- Активные устройства: **3**  
- Используемая ёмкость увеличилась вдвое  
- Spare-устройств нет  

![Расширение RAID 5 до трёх дисков](Screenshot_18.png){ #fig:018 width=80% }

По завершении работы массив был размонтирован, остановлен и суперблоки всех устройств очищены.

![Очистка суперблоков](Screenshot_19.png){ #fig:019 width=80% }

# Контрольные вопросы

1. **Приведите определение RAID.**
   RAID (Redundant Array of Independent Disks) — это технология объединения нескольких физических дисков в единый логический массив с целью повышения производительности, отказоустойчивости или обоих параметров одновременно.

2. **Какие типы RAID-массивов существуют на сегодняшний день?**
   Наиболее распространённые уровни RAID:
   RAID 0, RAID 1, RAID 5, RAID 6, RAID 10, RAID 50, RAID 60, а также модификации: RAID 1E, RAID 5E, RAID 5EE, Nested RAID (RAID 01, 100 и др.).

3. **Охарактеризуйте RAID 0, RAID 1, RAID 5, RAID 6.**

   * **RAID 0 (Striping)**
     Данные распределяются по дискам блоками.
     Отказоустойчивость отсутствует: выход любого диска приводит к потере данных.
     Применяется для задач, где важна скорость: видеомонтаж, временные хранилища.

   * **RAID 1 (Mirroring)**
     Каждая запись дублируется на два или более дисков.
     Обеспечивает высокую отказоустойчивость, но требует вдвое больше места.
     Используется для критичных данных: системные разделы, серверы баз данных.

   * **RAID 5 (Striping + Parity)**
     Данные и контрольные суммы (parity) распределяются по всем дискам.
     При выходе одного диска массив продолжает работу за счёт восстановления данных по контрольным суммам.
     Эффективен в сочетании скорости и надёжности, подходит для серверов файлов и приложений.

   * **RAID 6 (Dual Parity)**
     Использует два блока контрольных сумм на каждый набор данных.
     Выдерживает отказ сразу двух дисков, но имеет более низкую производительность записи, чем RAID 5.
     Применяется для больших хранилищ, где важна максимальная надёжность.

# Заключение

В ходе выполнения работы я изучила принципы создания и управления программными RAID-массивами в Linux.
Были сформированы массивы RAID 1 и RAID 5, добавлены резервные устройства, проведена симуляция сбоя дисков и восстановление массива.
Я научилась создавать файловые системы на RAID, подключать их к системе и выполнять корректное удаление массива с очисткой метаданных.
