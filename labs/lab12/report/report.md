---
## Front matter
title: "Отчёт по лабораторной работе №12"
subtitle: "Настройки сети в Linux"
author: "Амина Аджигалиева"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Получить навыки настройки сетевых параметров системы.

# Ход выполнения работы

## Проверка конфигурации сети

Сначала я получила полномочия администратора, выполнив команду `su`, после чего начала проверку параметров сетевой конфигурации.

Для вывода информации о сетевых интерфейсах была использована команда  
`ip -s link`.  
Она показала список интерфейсов — **lo** (локальный интерфейс) и **enp0s3** (физический сетевой адаптер).  
Интерфейс **enp0s3** имеет состояние **UP**, что означает его активность. Также вывод содержит статистику по принятым и отправленным пакетам, количеству ошибок и коллизий.

![Вывод информации о сетевых интерфейсах](Screenshot_1.png){ #fig:001 width=80% }

Команда `ip route show` вывела маршруты, настроенные в системе.  
Основной маршрут (`default via 10.0.2.2 dev enp0s3`) указывает, что выход в Интернет осуществляется через шлюз **10.0.2.2**, используя интерфейс **enp0s3**.  
Сеть **10.0.2.0/24** также доступна через этот интерфейс.

С помощью команды `ip addr show` были получены сведения о назначенных IP-адресах.  
Для интерфейса **enp0s3** определён IPv4-адрес **10.0.2.15/24**, а также IPv6-адреса. Интерфейс находится в состоянии **UP**, что подтверждает его активность.

![Информация об адресах интерфейсов](Screenshot_2.png){ #fig:002 width=80% }

Для проверки сетевого соединения была использована команда  
`ping -c 4 8.8.8.8`.  
Все четыре пакета успешно доставлены, потерь не наблюдалось, что подтверждает наличие доступа к Интернету.

![Результаты проверки соединения](Screenshot_3.png){ #fig:003 width=80% }

Для интерфейса **enp0s3** был добавлен дополнительный адрес `10.0.0.10/24` командой  
`ip addr add 10.0.0.10/24 dev enp0s3`.  
Повторная проверка с помощью `ip addr show` подтвердила успешное добавление нового IP-адреса.

![Добавление нового IP-адреса](Screenshot_4.png){ #fig:004 width=80% }

Команда `ifconfig` показала ту же информацию, что и `ip addr show`: интерфейс **enp0s3** имеет адрес **10.0.2.15**, маску подсети **255.255.255.0** и широковещательный адрес **10.0.2.255**.  
Обе команды предоставляют схожие данные, но `ip` даёт более детализированную и современную информацию.

![Вывод команды ifconfig](Screenshot_5.png){ #fig:005 width=80% }

Команда `ss -tul` отобразила список всех прослушиваемых портов TCP и UDP.  
Из вывода видно, что на системе активны службы **ssh**, **http**, **ftp** и другие, ожидающие входящих соединений.

![Список прослушиваемых портов](Screenshot_6.png){ #fig:006 width=80% }

## Управление сетевыми подключениями с помощью nmcli

Сначала я получила права администратора с помощью команды `su` и просмотрела список существующих сетевых подключений, используя команду  
`nmcli connection show`.  
В списке отобразились активные соединения: **enp0s3** (сетевой интерфейс) и **lo** (локальный интерфейс).

![Просмотр существующих соединений](Screenshot_7.png){ #fig:007 width=80% }

Для интерфейса **enp0s3** было создано новое Ethernet-соединение с именем **dhcp** с помощью команды  
`nmcli connection add con-name "dhcp" type ethernet ifname enp0s3`.  
Создание подключения завершилось успешно.

Затем я добавила ещё одно соединение с именем **static**, используя статическую настройку IP:  
`nmcli connection add con-name "static" ifname enp0s3 autoconnect no type ethernet ip4 10.0.0.10/24 gw4 10.0.0.1`.  
Команда успешно создала статическое соединение для интерфейса **enp0s3**.

Команда `nmcli connection show` подтвердила наличие трёх соединений: **dhcp**, **static** и **enp0s3**.  
Каждое соединение имеет уникальный UUID и тип устройства.

Далее я активировала статическое соединение командой  
`nmcli connection up "static"`.  
Система успешно активировала соединение, о чём свидетельствует сообщение о подключении через D-Bus.  
Проверка командой `ip addr` показала, что интерфейсу **enp0s3** назначен статический IP-адрес **10.0.0.10/24**.

![Активация статического подключения](Screenshot_8.png){ #fig:008 width=80% }

Чтобы вернуть сетевой интерфейс в режим автоматического получения IP-адреса, я активировала соединение **dhcp**:  
`nmcli connection up "dhcp"`.  
После выполнения команды система успешно перешла к динамическому IP.  
Команда `ip addr` показала, что интерфейс **enp0s3** снова получил адрес **10.0.2.15/24** от DHCP-сервера.

![Переключение обратно на DHCP](Screenshot_9.png){ #fig:009 width=80% }

# Ход выполнения работы

## Изменение параметров соединения с помощью nmcli

Сначала я отключила автоподключение статического соединения, чтобы избежать его автоматической активации при запуске системы.  
Для этого была выполнена команда  
`nmcli connection modify "static" connection.autoconnect no`.

Далее я добавила DNS-сервер с адресом `10.0.0.10` с помощью команды  
`nmcli connection modify "static" ipv4.dns 10.0.0.10`,  
а затем — дополнительный DNS-сервер Google (`8.8.8.8`) через команду  
`nmcli connection modify "static" +ipv4.dns 8.8.8.8`.

После этого был изменён основной IP-адрес интерфейса:  
`nmcli connection modify "static" ipv4.addresses 10.0.0.20/24`,  
и добавлен дополнительный адрес `10.20.30.40/16`.  
Все изменения активированы командой  
`nmcli connection up "static"`.

![Изменение параметров соединения и добавление адресов](Screenshot_10.png){ #fig:010 width=80% }

Команда `ip addr` показала, что интерфейс **enp0s3** получил два IP-адреса — **10.0.0.20/24** и **10.20.30.40/16**, что подтверждает успешное применение изменений.  
Интерфейс находится в состоянии **UP** и функционирует корректно.

![Проверка IP-адресов интерфейса](Screenshot_11.png){ #fig:011 width=80% }

С помощью утилиты **nmtui** были просмотрены текущие параметры соединений.  
В настройках соединения **static** указаны два IP-адреса, шлюз **10.0.0.1** и DNS-серверы **10.0.0.10** и **8.8.8.8**.  
Это подтверждает корректность изменений, выполненных через `nmcli`.

![Просмотр настроек через nmtui для static](Screenshot_12.png){ #fig:012 width=80% }

Соединение **dhcp**, напротив, использует автоматическое получение параметров и подключается при запуске.

![Просмотр настроек через nmtui для dhcp](Screenshot_13.png){ #fig:013 width=80% }

Через настройки сети в графическом интерфейсе ОС видно, что активным является профиль **static**, а для интерфейса **enp0s3** назначены IP-адрес **10.20.30.40**, шлюз **10.0.0.1** и DNS-серверы **10.0.0.10** и **8.8.8.8**.

![Просмотр сетевых параметров static в GUI](Screenshot_14.png){ #fig:014 width=80% }

После переключения обратно на DHCP, в интерфейсе отобразилось автоматическое получение адреса **10.0.2.15** и шлюза **10.0.2.2**, что подтверждает успешное возвращение к исходной конфигурации.

![Переключение обратно на DHCP в GUI](Screenshot_15.png){ #fig:015 width=80% }

В окне редактирования соединения **static** видно, что режим IPv4 установлен как **Manual**, указаны два IP-адреса и два DNS-сервера.  
Эта настройка полностью совпадает с параметрами, заданными ранее с помощью `nmcli`.

![Редактирование соединения static в GUI](Screenshot_16.png){ #fig:016 width=80% }

После возвращения к DHCP интерфейс **enp0s3** снова получает параметры автоматически: IPv4-адрес **10.0.2.15**, шлюз **10.0.2.2** и DNS-сервер **10.0.2.3**.

![Проверка настроек после возврата к DHCP](Screenshot_17.png){ #fig:017 width=80% }

# Контрольные вопросы

1. **Какая команда отображает только статус соединения, но не IP-адрес?**  
   Команда `nmcli device status` выводит список устройств и текущее состояние соединения без указания IP-адресов.

2. **Какая служба управляет сетью в ОС типа RHEL?**  
   За управление сетевыми настройками отвечает служба `NetworkManager`.

3. **Какой файл содержит имя узла (устройства) в ОС типа RHEL?**  
   Имя узла хранится в файле `/etc/hostname`.

4. **Какая команда позволяет вам задать имя узла (устройства)?**  
   Имя узла можно задать командой `hostnamectl set-hostname <имя_устройства>`.

5. **Какой конфигурационный файл можно изменить для включения разрешения имён для конкретного IP-адреса?**  
   Для этого используется файл `/etc/hosts`, где задаются соответствия IP-адресов и имён узлов.

6. **Какая команда показывает текущую конфигурацию маршрутизации?**  
   Текущие маршруты можно просмотреть командой `ip route show`.

7. **Как проверить текущий статус службы NetworkManager?**  
   Состояние службы проверяется командой `systemctl status NetworkManager`.

8. **Какая команда позволяет вам изменить текущий IP-адрес и шлюз по умолчанию для вашего сетевого соединения?**  
   Это можно сделать с помощью `nmcli`, например:  
   `nmcli connection modify <имя_соединения> ipv4.addresses <IP>/<маска> ipv4.gateway <шлюз>`.

# Заключение

В ходе выполнения лабораторной работы я изучила методы управления сетевыми интерфейсами и настройками в ОС Linux.  
С помощью утилит `ip`, `nmcli`, `nmtui` и графического интерфейса я получила практические навыки конфигурирования сетевых соединений, создания и изменения профилей, назначения статических и динамических IP-адресов, настройки маршрутов и DNS-серверов.  
Я научилась переключаться между режимами DHCP и статической адресации, а также проверять корректность настроек сети с использованием команд `ping` и `ip route show`.  
Полученные знания позволили закрепить понимание принципов работы сетевой подсистемы Linux и инструментов администрирования, необходимых для эффективного управления сетевой инфраструктурой.
